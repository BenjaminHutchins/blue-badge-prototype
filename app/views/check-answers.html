{% extends "layouts/main.html" %}

{% block pageTitle %}
  Check your answers – Apply for a Blue Badge – GOV.UK
{% endblock %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "Alpha"
    },
    html: 'This is a new service – your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}

  {{ govukBackLink({
    text: "Back",
    href: "/personal-details"
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-l">Check your answers before sending your application</h1>

      {% set months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %}
      {% set monthIndex = (data['dob-month'] | int) - 1 %}

      {% if data['dob-day'] and data['dob-month'] and data['dob-year'] %}
        {% set dobFormatted = (data['dob-day'] | int) ~ " " ~ months[monthIndex] ~ " " ~ data['dob-year'] %}
      {% else %}
        {% set dobFormatted = "" %}
      {% endif %}

      {% if data['applying-for'] == "myself" %}
        {% set applyingForDisplay = "Myself" %}
      {% elif data['applying-for'] == "someone-else" %}
        {% set applyingForDisplay = "Someone else" %}
      {% else %}
        {% set applyingForDisplay = data['applying-for'] %}
      {% endif %}

      {% set criterionLabels = {
        "terminal-illness": "Terminal illness",
        "dla-higher-rate": "Disability Living Allowance higher rate mobility component",
        "pip": "Personal Independence Payment",
        "armed-forces-tariff": "Lump sum at tariff 1–8 from the Armed Forces Compensation Scheme",
        "war-pensioners": "War pensioners mobility supplement",
        "registered-blind": "Registered blind or severely sight impaired",
        "walking-difficulty": "Can't walk or find walking difficult",
        "hidden-disability": "Non-visible (hidden) disability",
        "arms-disability": "Driver with disability in both arms",
        "child-under-3-vehicle": "Child under 3 who needs to be kept near to a vehicle",
        "child-under-3-equipment": "Child under 3 who needs bulky medical equipment"
      } %}

      {% set criterionDisplay = criterionLabels[data['criterion']] if criterionLabels[data['criterion']] else data['criterion'] %}

      {{ govukSummaryList({
        rows: [
          {
            key: { text: "Applying for" },
            value: { text: applyingForDisplay },
            actions: {
              items: [
                {
                  href: "/eligibility",
                  text: "Change",
                  visuallyHiddenText: "who you are applying for"
                }
              ]
            }
          },
          {
            key: { text: "Criterion" },
            value: { text: criterionDisplay },
            actions: {
              items: [
                {
                  href: "/criterion",
                  text: "Change",
                  visuallyHiddenText: "criterion you want to apply under"
                }
              ]
            }
          },
          {
            key: { text: "First name" },
            value: { text: data['first-name'] },
            actions: {
              items: [
                {
                  href: "/personal-details",
                  text: "Change",
                  visuallyHiddenText: "first name"
                }
              ]
            }
          },
          {
            key: { text: "Last name" },
            value: { text: data['last-name'] },
            actions: {
              items: [
                {
                  href: "/personal-details",
                  text: "Change",
                  visuallyHiddenText: "last name"
                }
              ]
            }
          },
          {
            key: { text: "Date of birth" },
            value: { text: dobFormatted },
            actions: {
              items: [
                {
                  href: "/personal-details",
                  text: "Change",
                  visuallyHiddenText: "date of birth"
                }
              ]
            }
          },
          {
            key: { text: "Email address" },
            value: { text: data['email'] },
            actions: {
              items: [
                {
                  href: "/personal-details",
                  text: "Change",
                  visuallyHiddenText: "email address"
                }
              ]
            }
          }
        ]
      }) }}

      <h2 class="govuk-heading-m">Now send your application</h2>

      <p class="govuk-body">By submitting this application you confirm that the information you have provided is correct to the best of your knowledge.</p>

      <form method="post" action="/check-answers-answer">
        {{ govukButton({
          text: "Accept and send"
        }) }}
      </form>

    </div>
  </div>
{% endblock %}
